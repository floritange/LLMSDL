# #139 Rebuttal

### Table: Patterns for LLM Role and Configuration Extraction

| Feature Type | Feature Name | Identification Method | Specific Patterns (Keywords, Regex, AST Queries) |
| :--- | :--- | :--- | :--- |
| **Role** | **API_Caller** | AST | - **AST:** `(call function: ...)` where the function name matches keywords. <br>- **FunctionName Keywords:** `generate`, `create`, `invoke`, `call`, `run`, `predict`, `complete`, `completion`, `chat`, `embed`, `ask`, `query`, `infer`, `send_request`, `stream`, `agenerate`, `acompletion`, `achat`, `async_generate`. <br>- **Argument Keywords:** `model`, `prompt`, `messages`, `max_tokens`, `temperature`, `system_prompt`, `tools`, `tool_choice`, `engine`, `deployment_id`, `api_key`, `api_base`, `model_name`. |
| | | Regex | - **Library Import Pattern:** `r"\b(openai|anthropic|huggingface|langchain|llama_index|semantic_kernel|google\.generativeai|vertexai|litellm|guidance|cohere|ai21|gemini|mistralai|instructor)\b"` <br>- **Keywords:** `openai`, `anthropic`, `ollama`, `huggingface_hub`, `transformers`, `google.generativeai`, `vertexai`, `langchain`, `llama_index`, `semantic_kernel`, `litellm`, `guidance`, `cohere`, `ai21`, `gemini`, `mistralai`, `instructor`, `sentence_transformers`. |
| **Role** | **Prompt_Builder** | AST | - **AST:** `(assignment left: (identifier) @var_name ...)` where `@var_name` matches keywords. <br>- **Variable Keywords:** `prompt`, `messages`, `query`, `template`, `instruction`, `context_str`, `system_message`, `user_message`, `assistant_message`, `system_prompt`, `user_prompt`. <br>- **String Analysis:** `(string)`, `(interpolation)` - Detects f-strings with placeholders (`{...}`), `.format()` calls, or template keywords. |
| | | Regex | - **Template Library Pattern:** `r"(template|MessagePromptTemplate|ChatPromptTemplate|PromptTemplate|jinja2|mustache|FewShotPromptTemplate|PromptDialog)"` <br>- **Content Keywords:** `user:`, `assistant:`, `system:`, `context:`, `question:`, `answer:`, `human:`, `ai:`, `<user>`, `<assistant>`, `<system>`. |
| **Role** | **Response_Parser** | Regex | - **Regex Patterns:** `r"json\.loads"`, `r"xml\.etree"`, `r"BeautifulSoup"`, `r"parse_xml_response"`, `r"OutputParser"`, `r"PydanticOutputParser"`, `r"loads_json_response"`, `r"\.parse\b"`, `r"\.extract\b"`, `r"parser\.(?:parse|parse_partial)"`, `r"response\."`, `r"response\.get\b"`, `r"json\.dump"`, `r"\.to_json\b"`, `r"parse_result"`, `r"extract_content"`, `r"\.content\b"`, `r"\.text\b"`. |
| **Role** | **Context_Retriever** | Regex | - **Regex Patterns:** `r"search\b"`, `r"retrieve\b"`, `r"vector_store"`, `r"knowledge_base"`, `r"db\.query"`, `r"similarity_search"`, `r"retriever\."`, `r"annoy"`, `r"faiss"`, `r"chroma"`, `r"pinecone"`, `r"weaviate"`, `r"elasticsearch"`, `r"rag"`, `r"top_k"`, `r"similarity_threshold"`, `r"nearest_neighbors"`, `r"document_retrieval"`, `r"query_documents"`, `r"fetch_context"`. |
| **Role** | **History_Manager** | Regex | - **Regex Patterns:** `r"history\.append"`, `r"memory\.save_context"`, `r"conversation_buffer"`, `r"chat_history"`, `r"ConversationChain"`, `r"load_memory_variables"`, `r"ChatMessageHistory"`, `r"ConversationBufferMemory"`, `r"previous_messages"`, `r"message_history"`, `r"append_message"`, `r"add_message"`, `r"update_history"`, `r"store_conversation"`, `r"get_chat_history"`, `r"conversation_state"`. |
| **Role** | **Embedding_Generator** | Regex | - **Regex Patterns:** `r"\.embed_documents"`, `r"\.embed_query"`, `r"get_embedding"`, `r"embeddings?\."`, `r"Embedding"`, `r"SentenceTransformer"`, `r"CohereEmbeddings"`, `r"OpenAIEmbeddings"`, `r"similarity\b"`, `r"vector\b"`, `r"encode\b"`, `r"embedding_function"`, `r"text_to_embedding"`, `r"create_embeddings"`, `r"vectorize"`, `r"ada_embedding"`. |
| **Role** | **Knowledge_Updater** | Regex | - **Regex Patterns:** `r"update_knowledge"`, `r"add_document"`, `r"index_document"`, `r"upsert"`, `r"update_index"`, `r"add_texts"`, `r"vectorstore\.add"`, `r"knowledge_base\.add"`, `r"db\.insert"`, `r"update_vectorstore"`, `r"index\.add"`, `r"store_document"`, `r"ingest_documents"`, `r"create_index"`, `r"update_database"`. |
| **Role** | **Input_Validator** | Regex | - **Regex Patterns:** `r"validate_input"`, `r"check_input"`, `r"is_valid"`, `r"validator"`, `r"schema\.validate"`, `r"input_validation"`, `r"validate\b"`, `r"assert\s+\w+"`, `r"if\s+not\s+\w+:"`, `r"raise\s+ValueError"`, `r"input_verification"`, `r"sanitize_input"`, `r"check_parameters"`, `r"verify_inputs"`. |
| **Role** | **Output_Processor** | Regex | - **Regex Patterns:** `r"process_response"`, `r"format_output"`, `r"transform_result"`, `r"postprocess"`, `r"output_formatter"`, `r"response_handler"`, `r"clean_response"`, `r"format_result"`, `r"prepare_output"`, `r"structure_output"`, `r"enhance_response"`, `r"filter_response"`, `r"transform_output"`, `r"beautify_output"`. |
| **Role** | **Error_Handler** | AST | - **AST:** `(try_statement)` - Detects try...except blocks using Tree-sitter. <br>- **Exception Keywords:** `APIError`, `RateLimitError`, `AuthenticationError`, `timeout`, `retry`, `backoff`, `ConnectionError`, `ServiceUnavailableError`, `QuotaExceededError`, `InvalidRequestError`, `ServerOverloadedError`, `TokenLimitError`. |
| | | Regex | - **Exception Pattern:** `r"except\s+(\w+Error|Exception)"` combined with keywords above. |
| **Role** | **Data_Sanitizer** | Regex | - **Regex Patterns:** `r"sanitize"`, `r"clean_data"`, `r"remove_pii"`, `r"scrub_data"`, `r"filter_sensitive"`, `r"escape_html"`, `r"strip_tags"`, `r"secure_data"`, `r"normalize_data"`, `r"redact"`, `r"anonymize"`, `r"mask_data"`, `r"clean_text"`, `r"filter_content"`, `r"content_filter"`. |
| **Configuration** | **AuthKey** | Regex | - **Environment Variable Pattern:** `r"os\.(?:environ\.get\|getenv)\s*$\s*['\"]([^'\"]+)['\"]"` where captured group contains: `KEY`, `TOKEN`, `ENDPOINT`, `SECRET`, `URL`, `ID`, `MODEL`, `PROJECT`, `REGION`, `CONFIG`, `API`. <br>- **String Literal Pattern:** `r"['\"](api_key\|secret\|token\|organization)['\"]"` |
| **Configuration** | **Model Selection** | Regex | - **String Literal Pattern:** `r"['\"](model\|model_name\|engine\|deployment_id)['\"]"` |
| **Configuration** | **API Endpoint** | Regex | - **String Literal Pattern:** `r"['\"](api_base\|base_url\|endpoint\|api_version)['\"]"` |
| **Configuration** | **API Parameter** | Regex | - **String Literal Pattern:** `r"['\"](temperature\|max_tokens\|top_p\|frequency_penalty\|presence_penalty)['\"]"` |
| **Configuration** | **Context Setting** | Regex | - **String Literal Pattern:** `r"['\"](system_prompt)['\"]"` |
| **Configuration** | **Database Setting** | Regex | - **String Literal Pattern:** `r"['\"](pinecone\|faiss\|top_k\|similarity_threshold)['\"]"` |
| **Configuration** | **Request Setting** | Regex | - **String Literal Pattern:** `r"['\"](timeout\|max_retries)['\"]"` |
